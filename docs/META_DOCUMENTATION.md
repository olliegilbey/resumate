---
last_updated: 2025-10-28
category: Meta (Documentation System)
update_frequency: When documentation structure changes
retention_policy: All versions preserved in git
---

# Documentation System Guide

> **üìç Purpose:** AI agent directives for maintaining documentation consistency.
> Prevents drift through single sources of truth and temporal separation.

---

## Core Principles

### 1. Single Source of Truth (SSOT)
Every piece of information has EXACTLY one canonical location. Never duplicate.

### 2. Temporal Separation
Files organized by update frequency:

| Frequency | Files | Timestamps? |
|-----------|-------|-------------|
| Never | ARCHITECTURE.md, DATA_SCHEMA.md | ‚ùå No |
| Quarterly | TESTING_STRATEGY.md, CLAUDE.md | ‚ùå No |
| Per Phase | CURRENT_PHASE.md, DEPLOYMENT_GUIDE.md | ‚úÖ Date only |
| Per Commit | METRICS.md | ‚úÖ Date+time (minutes) |

**Note:** Task tracking migrated to Linear (2025-11-03).

### 3. Fact vs Opinion
- **Facts** (verifiable) ‚Üí Generated by scripts
- **Observations** (judgment) ‚Üí Manual documentation

### 4. Conflict Resolution
When information conflicts:
```
1. Generated data > Manual claims
2. Recent date > Old date
3. Specific location > General
4. Lower in tree > Higher in tree
```

---

## File Inventory

| File | Purpose | Update When | Contains | Never Contains |
|------|---------|-------------|----------|----------------|
| **`.claude/CLAUDE.md`** | Router | Quarterly | Links, core paths | Metrics, current status |
| **`docs/METRICS.md`** | Metrics | Every commit | Test counts, coverage | Manual claims |
| **`docs/CURRENT_PHASE.md`** | Status | Per phase | Active phase, blockers | Historical phases, metrics |
| **`docs/TESTING_STRATEGY.md`** | Philosophy | Quarterly | How to test, why | Test counts, coverage % |
| **`docs/ARCHITECTURE.md`** | Design | Per major version | System design | Temporary status |
| **`docs/DATA_SCHEMA.md`** | Types | When schema changes | Type system | Current data |
| **`docs/DEPLOYMENT_GUIDE.md`** | How-to | When process changes | Steps to deploy | Current status |
| **`docs/META_DOCUMENTATION.md`** | Meta | When docs change | This guide | Project specifics |

---

## When to Update What

### Changed Rust types?
```bash
just types-sync
# No doc updates needed
```

### Completed a phase?
**Update:** `docs/CURRENT_PHASE.md`
**Add:** `last_updated: 2025-10-30` (date only)

### Added/removed tests?
**Update:** Nothing (auto-generated on next commit)

### Started new task?
**Update:** Linear project (create or update issue)

### Changed architecture?
**Update:** `docs/ARCHITECTURE.md` (rare)

### Changed testing approach?
**Update:** `docs/TESTING_STRATEGY.md` (quarterly)

---

## Anti-Patterns (NEVER Do This)

‚ùå **Duplicating information "for convenience"**
```markdown
# Bad: In CLAUDE.md
Tests: 361 (see METRICS.md)

# Good: In CLAUDE.md
For test counts, see docs/METRICS.md
```

‚ùå **Timestamps without date format**
```yaml
# Bad
last_updated: 2025-10-28T14:30:52.123Z

# Good (date only for most docs)
last_updated: 2025-10-28

# Good (date+time for metrics only)
Generated: 2025-10-28T14:30
```

‚ùå **Manually editing generated files**
- Never edit `docs/METRICS.md` by hand
- Fix generation script instead

‚ùå **Claiming numbers without verification**
```markdown
# Bad
We have 236 Rust tests.

# Good
For current test counts, see docs/METRICS.md (auto-generated).
```

---

## Good Patterns (ALWAYS Do This)

‚úÖ **Link to canonical source**
```markdown
For [information], see [canonical-file.md]
```

‚úÖ **Generate dynamic data from commands**
```bash
# Parse actual output
RUST_COUNT=$(grep "passed" /tmp/test.log | awk '{sum+=$1} END {print sum}')
```

‚úÖ **Add timestamps to manual updates**
```yaml
---
last_updated: 2025-10-28
---
```


‚úÖ **Verify docs in pre-commit**
- `scripts/verify-docs.sh` catches drift

---

## Automation

### `scripts/update-metrics-from-logs.sh`
**Trigger:** Every commit (pre-commit hook)
**Generates:** `docs/METRICS.md`
**Input:** Test logs from `/tmp/resumate-*-tests.log`

### `scripts/verify-docs.sh`
**Trigger:** Every commit (pre-commit hook)
**Checks:**
1. No test counts in CLAUDE.md
2. METRICS.md <24h old
3. Timestamps are date-only (or date+time for metrics)
4. No duplicate information


---

## Quick Reference for AI Agents

### Before Work
1. Ask: "Which Linear issue?"
2. Fetch issue details from Linear
3. Check `.claude/CLAUDE.md` ‚Üí Find docs
4. Read `docs/CURRENT_PHASE.md` ‚Üí Current phase
5. Read component CLAUDE.md if in subdirectory

### During Work
- Use `just test` (fast feedback)
- Use `just check` (type validation)
- Use `just types-sync` (after Rust changes)

### After Work
1. Update Linear issue status
2. Update `docs/CURRENT_PHASE.md` (if major milestone)
3. Run `just test` (auto-regenerates METRICS.md)
4. Commit (hooks verify everything)

### Critical Rules
- ‚ö†Ô∏è NEVER edit METRICS.md manually
- ‚ö†Ô∏è NEVER duplicate information
- ‚ö†Ô∏è ALWAYS link to canonical source
- ‚ö†Ô∏è ALWAYS use date-only timestamps (except metrics)
- ‚ö†Ô∏è ALWAYS verify before claiming numbers

---

## Generic Template

This system works for ANY project:

```
.claude/CLAUDE.md              # Router
docs/
  ‚îú‚îÄ‚îÄ ARCHITECTURE.md          # Immutable design
  ‚îú‚îÄ‚îÄ CURRENT_PHASE.md         # Active phase
  ‚îú‚îÄ‚îÄ TESTING_STRATEGY.md      # Philosophy
  ‚îú‚îÄ‚îÄ METRICS.md               # Generated metrics
  ‚îú‚îÄ‚îÄ LINEAR_WORKFLOW.md       # Linear task tracking guide
  ‚îî‚îÄ‚îÄ META_DOCUMENTATION.md    # This guide
scripts/
  ‚îú‚îÄ‚îÄ update-metrics-from-logs.sh
  ‚îî‚îÄ‚îÄ verify-docs.sh
```

**Core principles apply everywhere:**
1. Single source of truth
2. Temporal separation
3. Generated facts
4. Manual observations
5. Automated verification

---

## Related Docs

- [METRICS.md](./METRICS.md) - Auto-generated metrics
- [CURRENT_PHASE.md](./CURRENT_PHASE.md) - Active phase
- [TESTING_STRATEGY.md](./TESTING_STRATEGY.md) - Testing philosophy
- [ARCHITECTURE.md](./ARCHITECTURE.md) - System design
- Linear project - Active tasks and issues

---

**Last Updated:** 2025-10-28
**Next Review:** When documentation structure changes
