%% ============================================================================
%% RESUMATE: COMPLETE SYSTEM ARCHITECTURE MAP
%% ============================================================================
%% This is the definitive, comprehensive map of the entire Resumate codebase.
%% 118 files, 361 tests, all connections, all data flows.
%% View in full-screen mermaid viewer for best experience.
%% Last Updated: 2025-10-16
%% ============================================================================

graph TB
    %% ========================================================================
    %% EXTERNAL SYSTEMS & INFRASTRUCTURE
    %% ========================================================================

    subgraph EXTERNAL["ğŸŒ EXTERNAL SYSTEMS & INFRASTRUCTURE"]
        direction TB

        GITHUB["ğŸ™ GitHub Repository<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Source code hosting<br/>CI/CD triggers"]

        GIST["ğŸ“¦ GitHub Gist<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>resume-data.json<br/><b>SOURCE OF TRUTH FOR DATA</b><br/>Public gist<br/>Webhook to Vercel"]

        VERCEL["â˜ï¸ Vercel Platform<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Build Pipeline<br/>CDN Distribution<br/>Serverless Functions<br/>Edge Network"]

        CLOUDFLARE["ğŸ”’ Cloudflare<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Turnstile CAPTCHA<br/>Bot protection<br/>Challenges API"]

        USER["ğŸ‘¤ End User<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Web Browser<br/>HTTP Client"]

        NPM_REG["ğŸ“š NPM Registry<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Dependencies<br/>Package resolution"]

        CARGO_REG["ğŸ¦€ Crates.io<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Rust dependencies<br/>Cargo packages"]
    end

    %% ========================================================================
    %% TYPE SYSTEM - THE CORE (SINGLE SOURCE OF TRUTH)
    %% ========================================================================

    subgraph TYPE_SYSTEM["ğŸ¦€ TYPE SYSTEM - SINGLE SOURCE OF TRUTH"]
        direction TB

        subgraph RUST_TYPES_CRATE["crates/shared-types/"]
            direction TB

            SHARED_TYPES["<b>src/lib.rs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/><b>SOURCE OF TRUTH</b><br/>523 lines<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Types:</b><br/>â€¢ Company (hierarchical)<br/>â€¢ Position (middle layer)<br/>â€¢ Bullet (leaf nodes)<br/>â€¢ RoleProfile<br/>â€¢ ScoringWeights<br/>â€¢ ResumeData (root)<br/>â€¢ PersonalInfo<br/>â€¢ Education<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Features:</b><br/>â€¢ #[derive(JsonSchema)]<br/>â€¢ Validation methods<br/>â€¢ Serialize/Deserialize<br/>â€¢ PartialEq, Clone, Debug"]

            SCHEMA_EMITTER["<b>src/bin/generate_schema.rs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>44 lines<br/>â”â”â”â”â”â”â”â”â”â”â”<br/>Schema Generator Binary<br/>â€¢ Uses schemars crate<br/>â€¢ Generates JSON Schema<br/>â€¢ Adds metadata ($comment)<br/>â€¢ Writes to schemas/<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Run:</b> cargo run --bin"]

            ST_CARGO["<b>Cargo.toml</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Crate config<br/>â€¢ schemars<br/>â€¢ serde<br/>â€¢ serde_json"]

            subgraph ST_TESTS["tests/"]
                REAL_DATA_TEST["real_data.rs<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>8 tests<br/>Real data validation"]

                ROUNDTRIP_TEST["roundtrip.rs<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>12 tests<br/>Serialization tests"]

                SCHEMA_VAL_TEST["schema_validation.rs<br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>11 tests<br/>Schema compliance"]
            end
        end

        JSON_SCHEMA_FILE["<b>schemas/resume.schema.json</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/><b>GENERATED JSON SCHEMA</b><br/>Auto-generated from Rust<br/>â€¢ $comment with timestamp<br/>â€¢ Full type definitions<br/>â€¢ Validation rules<br/>â€¢ Used for TS generation<br/>â”â”â”â”â”â”â”â”â”â”â”<br/>âš ï¸ Never edit manually"]

        TS_GENERATOR["<b>scripts/gen-ts-from-schemas.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>61 lines<br/>â”â”â”â”â”â”â”â”â”â”â”<br/>TypeScript Generator<br/>â€¢ json-schema-to-typescript<br/>â€¢ Reads JSON Schema<br/>â€¢ Generates TS types<br/>â€¢ Adds banner comment<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Run:</b> npm run types:gen"]

        GENERATED_TS["<b>lib/types/generated-resume.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/><b>GENERATED TYPESCRIPT</b><br/>Auto-generated from schema<br/>â€¢ Company, Position, Bullet<br/>â€¢ RoleProfile types<br/>â€¢ Full type safety<br/>â”â”â”â”â”â”â”â”â”â”â”<br/>âš ï¸ Never edit manually<br/>Banner warns against edits"]

        CANONICAL_TYPES["<b>types/resume.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/><b>CANONICAL IMPORT LOCATION</b><br/>Re-exports generated types<br/>â”â”â”â”â”â”â”â”â”â”â”<br/>âœ… ALWAYS import from here<br/>âœ… Never import from generated"]

        TEMPLATE_JSON["<b>data/resume-data-template.json</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Template structure<br/>Example format<br/>Pseudo-schema"]

        TEMPLATE_GUIDE["<b>data/TEMPLATE_GUIDE.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Template documentation<br/>Field explanations"]
    end

    %% ========================================================================
    %% RUST CORE IMPLEMENTATION (ALGORITHMS & GENERATION)
    %% ========================================================================

    subgraph RUST_CORE["ğŸ¦€ RUST CORE IMPLEMENTATION"]
        direction TB

        WORKSPACE_TOML["<b>Cargo.toml (root)</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Workspace configuration<br/>â€¢ shared-types<br/>â€¢ doc-gen workspace"]

        subgraph DOC_GEN_WORKSPACE["doc-gen/ Workspace"]
            direction TB

            DG_README["<b>README.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Rust/WASM docs"]

            DG_CLAUDE["<b>CLAUDE.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Rust-specific context<br/>AI assistant guide"]

            DG_TEST_REPORT["<b>TEST_REPORT.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Test metrics<br/>361 total tests"]

            subgraph CORE_CRATE["crates/core/ - Scoring & Selection"]
                direction TB

                CORE_LIB["<b>src/lib.rs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Module exports<br/>Re-exports types"]

                CORE_TYPES["<b>src/types.rs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Type re-exports<br/>From shared-types"]

                SCORING_RS["<b>src/scoring.rs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>553 lines | 22 tests<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>HIERARCHICAL SCORING</b><br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Formula:</b><br/>final_score = base Ã— company_mult Ã— position_mult<br/><br/>base = (tag_rel Ã— tag_weight) + (priority/10 Ã— pri_weight)<br/>company_mult = 0.8 + (priority/10) Ã— 0.4<br/>position_mult = priority_mult Ã— tag_mult<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Functions:</b><br/>â€¢ score_bullet() - Main scoring<br/>â€¢ calculate_tag_relevance()<br/>â€¢ calculate_company_multiplier()<br/>â€¢ calculate_position_multiplier()<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Tests:</b><br/>â€¢ 14 unit tests<br/>â€¢ 8 property-based tests"]

                SELECTOR_RS["<b>src/selector.rs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>419 lines | 7 tests<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>BULLET SELECTION</b><br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Algorithm:</b><br/>1. Extract all bullets<br/>2. Score each bullet<br/>3. Sort by score (desc)<br/>4. Apply diversity constraints<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>SelectionConfig:</b><br/>â€¢ max_bullets: 18<br/>â€¢ max_per_company: 6<br/>â€¢ max_per_position: 4<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Functions:</b><br/>â€¢ select_bullets() - Main<br/>â€¢ score_description_as_bullet()<br/>â€¢ apply_diversity_constraints()<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Key Feature:</b><br/>Position descriptions â†’ bullets"]

                CORE_CARGO["<b>Cargo.toml</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Dependencies:<br/>â€¢ shared-types<br/>â€¢ serde<br/>â€¢ proptest (dev)"]

                subgraph CORE_TESTS_DIR["tests/"]
                    INTEGRATION_TEST["<b>integration_test.rs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>753 lines | 15 tests<br/>â”â”â”â”â”â”â”â”â”â”â”<br/>Real data integration<br/>â€¢ All 6 role profiles<br/>â€¢ PDF generation tests<br/>â€¢ Diversity validation<br/>â€¢ Unicode handling<br/>â€¢ GenerationPayload tests<br/>â”â”â”â”â”â”â”â”â”â”â”<br/>Uses: data/resume-data.json"]

                    PDF_PERMUTATION_TEST["<b>pdf_permutation.rs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>733 lines | 7 tests<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>PERMUTATION TESTING</b><br/>â”â”â”â”â”â”â”â”â”â”â”<br/>â€¢ All profiles Ã— configs<br/>â€¢ Size consistency (CV=1.91%)<br/>â€¢ Performance (<1ms avg)<br/>â€¢ Structure validation<br/>â€¢ Content extraction<br/>â€¢ Page count estimates<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>PdfAnalysis struct:</b><br/>Tracks size, time, pages"]

                    CORE_ROUNDTRIP["<b>roundtrip.rs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>12 tests<br/>Serialization tests"]
                end
            end

            subgraph PDF_CRATE["crates/pdf/ - PDF Generation"]
                direction TB

                PDF_LIB["<b>src/lib.rs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Main PDF API<br/>â€¢ generate_pdf()<br/>â€¢ GenerationPayload<br/>â€¢ Uses pdf-writer crate"]

                PDF_GENERATOR["<b>src/generator.rs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>PDF document builder<br/>â€¢ Document structure<br/>â€¢ Page management<br/>â€¢ Content streaming"]

                PDF_LAYOUT["<b>src/layout.rs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Layout engine<br/>â€¢ Margins calculation<br/>â€¢ Line spacing<br/>â€¢ Text wrapping<br/>â€¢ Page breaks"]

                subgraph PDF_RENDERING["src/rendering/"]
                    PDF_RENDER_MOD["<b>mod.rs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Module exports"]

                    PDF_HEADER["<b>header.rs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Header rendering<br/>â€¢ Name placement<br/>â€¢ Contact info<br/>â€¢ Formatting"]

                    PDF_BODY["<b>experience.rs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Body rendering<br/>â€¢ Company sections<br/>â€¢ Position headers<br/>â€¢ Bullet formatting<br/>â€¢ Hierarchical layout"]

                    PDF_FOOTER["<b>footer.rs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Footer rendering<br/>â€¢ Skills section<br/>â€¢ Education section<br/>â€¢ Page numbers"]
                end

                PDF_CARGO["<b>Cargo.toml</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Dependencies:<br/>â€¢ pdf-writer<br/>â€¢ shared-types"]

                subgraph PDF_TESTS_DIR["tests/"]
                    PDF_COMMON["<b>common/mod.rs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Shared test utilities<br/>Test helpers"]
                end
            end

            subgraph DOCX_CRATE["crates/docx/ - DOCX Generation"]
                direction TB

                DOCX_LIB["<b>src/lib.rs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>DOCX generation API<br/>â€¢ generate_docx()<br/>â€¢ Uses docx-rs crate<br/>â”â”â”â”â”â”â”â”â”â”â”<br/>â³ Phase 5.5 (future)<br/>Basic structure only"]

                DOCX_CARGO["<b>Cargo.toml</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Dependencies:<br/>â€¢ docx-rs<br/>â€¢ shared-types"]
            end

            subgraph WASM_CRATE["crates/wasm/ - WASM Bindings"]
                direction TB

                WASM_LIB["<b>src/lib.rs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>733 lines | 20 tests<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>WASM EXPORTS</b><br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>wasm_bindgen functions:</b><br/>â€¢ generate_pdf(json) â†’ Vec<u8><br/>â€¢ generate_docx(json) â†’ Vec<u8><br/>â€¢ validate_payload_json(json)<br/>â€¢ estimate_pdf_size(count)<br/>â€¢ estimate_docx_size(count)<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Platform-agnostic:</b><br/>validate_payload_internal()<br/>Returns Result<(), String><br/>(for cross-platform tests)<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Tests:</b><br/>â€¢ Boundary tests (0, 50 bullets)<br/>â€¢ Scoring weight validation<br/>â€¢ Whitespace tests<br/>â€¢ Size estimation tests"]

                WASM_CARGO["<b>Cargo.toml</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Dependencies:<br/>â€¢ wasm-bindgen<br/>â€¢ docgen-pdf<br/>â€¢ docgen-docx<br/>â€¢ serde-wasm-bindgen"]
            end

            subgraph WASM_PKG["pkg/ - Generated WASM Artifacts"]
                WASM_JS["<b>docgen_wasm.js</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>JavaScript bindings<br/>Auto-generated"]

                WASM_DTS["<b>docgen_wasm.d.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>TypeScript definitions<br/>Auto-generated"]

                WASM_BG_DTS["<b>docgen_wasm_bg.wasm.d.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>WASM background types<br/>Auto-generated"]

                WASM_PKG_JSON["<b>package.json</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>WASM package metadata"]
            end
        end
    end

    %% ========================================================================
    %% NEXT.JS APPLICATION (FRONTEND & API)
    %% ========================================================================

    subgraph NEXTJS_APP["âš›ï¸ NEXT.JS APPLICATION"]
        direction TB

        NEXT_CONFIG["<b>next.config.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Next.js configuration<br/>â€¢ Build settings<br/>â€¢ Environment vars<br/>â€¢ Webpack config"]

        TS_CONFIG["<b>tsconfig.json</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>TypeScript config<br/>â€¢ Path aliases (@/)<br/>â€¢ Strict mode<br/>â€¢ ES target"]

        MIDDLEWARE["<b>middleware.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Next.js middleware<br/>â€¢ Security headers<br/>â€¢ Request processing"]

        NEXT_ENV_DTS["<b>next-env.d.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Next.js type declarations<br/>Auto-generated"]

        subgraph APP_DIR["app/ - Next.js 15 App Router"]
            direction TB

            APP_CLAUDE["<b>CLAUDE.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Next.js-specific context<br/>API patterns<br/>Component patterns"]

            APP_LAYOUT["<b>layout.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Root layout<br/>â€¢ ThemeProvider<br/>â€¢ Font configuration<br/>â€¢ Global styles<br/>â€¢ Metadata"]

            APP_PAGE["<b>page.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/><b>LANDING PAGE</b><br/>â€¢ Hero section<br/>â€¢ Feature highlights<br/>â€¢ Links to resume viewer<br/>â€¢ Dark/light toggle"]

            APP_ICON["<b>icon.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Favicon generator<br/>Dynamic icon"]

            APP_ROBOTS["<b>robots.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>robots.txt generator<br/>SEO configuration"]

            subgraph RESUME_PAGES["resume/"]
                RESUME_PAGE["<b>page.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Resume redirect page<br/>Redirects to /resume/view"]

                RESUME_VIEW["<b>view/page.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/><b>MAIN RESUME VIEWER</b><br/>â€¢ DataExplorer component<br/>â€¢ Interactive filtering<br/>â€¢ Search functionality<br/>â€¢ Tag filtering<br/>â€¢ vCard download<br/>â€¢ Metrics display"]
            end

            subgraph API_ROUTES["api/"]
                CONTACT_CARD_API["<b>contact-card/route.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/><b>GET /api/contact-card</b><br/>â”â”â”â”â”â”â”â”â”â”â”<br/>vCard download endpoint<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Security:</b><br/>â€¢ Rate limit: 10/hour<br/>â€¢ Turnstile CAPTCHA<br/>â€¢ IP extraction<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Generates:</b><br/>â€¢ vCard 3.0 format<br/>â€¢ Contact information<br/>â€¢ .vcf file download<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Secrets (server-only):</b><br/>â€¢ CONTACT_EMAIL_PERSONAL<br/>â€¢ CONTACT_PHONE<br/>â€¢ TURNSTILE_SECRET_KEY"]

                subgraph RESUME_API["resume/"]
                    SELECT_API["<b>select/route.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>370 lines<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>POST /api/resume/select</b><br/>â”â”â”â”â”â”â”â”â”â”â”<br/>Bullet selection endpoint<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Request:</b><br/>â€¢ roleProfileId<br/>â€¢ turnstileToken<br/>â€¢ config (optional)<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Response:</b><br/>â€¢ selected: ScoredBullet[]<br/>â€¢ roleProfile<br/>â€¢ config<br/>â€¢ count, timestamp<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>TypeScript Implementation:</b><br/>Mirrors Rust algorithm<br/>â€¢ selectBullets()<br/>â€¢ scoreBullet()<br/>â€¢ calculateTagRelevance()<br/>â€¢ calculateCompanyMultiplier()<br/>â€¢ calculatePositionMultiplier()<br/>â€¢ applyDiversityConstraints()<br/>â”â”â”â”â”â”â”â”â”â”â”<br/>âš ï¸ Temporary until WASM<br/>(Phase 5.6 will replace)"]

                    PREPARE_API["<b>prepare/route.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/><b>POST /api/resume/prepare</b><br/>â”â”â”â”â”â”â”â”â”â”â”<br/>Resume preparation<br/>â³ Future: WASM integration<br/>Placeholder for Phase 5.7"]

                    subgraph SELECT_TESTS["select/__tests__/"]
                        SELECT_ROUTE_TEST["<b>route.test.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>451 lines | 13 tests<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>API ROUTE UNIT TESTS</b><br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Scoring Algorithm:</b><br/>â€¢ Tag relevance calculation<br/>â€¢ Company multiplier<br/>â€¢ Position multiplier<br/>â€¢ Component combination<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Diversity Constraints:</b><br/>â€¢ maxBullets respected<br/>â€¢ maxPerCompany respected<br/>â€¢ maxPerPosition respected<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Ensures Parity:</b><br/>With Rust implementation"]
                    end
                end
            end
        end

        subgraph COMPONENTS_DIR["components/ - React Components"]
            direction TB

            subgraph DATA_COMPONENTS["data/ - Resume Viewer Components"]
                DATA_EXPLORER["<b>DataExplorer.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/><b>MAIN RESUME VIEWER</b><br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Features:</b><br/>â€¢ Text search (real-time)<br/>â€¢ Tag filtering (click tags)<br/>â€¢ Company grouping<br/>â€¢ Timeline display<br/>â€¢ Metrics calculation<br/>â€¢ Responsive design<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Uses:</b><br/>â€¢ SearchBar<br/>â€¢ TagFilter<br/>â€¢ CompanySection<br/>â€¢ BulletCard<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Data Flow:</b><br/>ResumeData â†’ Filter â†’ Display"]

                BULLET_CARD["<b>BulletCard.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Individual bullet display<br/>â€¢ Description text<br/>â€¢ Tags (clickable)<br/>â€¢ Priority indicator<br/>â€¢ Link (optional)<br/>â€¢ Highlight matches"]

                COMPANY_SECTION["<b>CompanySection.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Company timeline grouping<br/>â€¢ Company header<br/>â€¢ Date range<br/>â€¢ Positions nested<br/>â€¢ Collapsible sections"]

                SEARCH_BAR["<b>SearchBar.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Text search input<br/>â€¢ Real-time filtering<br/>â€¢ Debounced input<br/>â€¢ Clear button"]

                TAG_FILTER["<b>TagFilter.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Tag filtering UI<br/>â€¢ All tags display<br/>â€¢ Click to filter<br/>â€¢ Active state<br/>â€¢ Tag counts"]
            end

            subgraph UI_COMPONENTS["ui/ - Reusable UI Components"]
                BADGE["<b>Badge.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Tag badge component<br/>Styled pill"]

                BUTTON["<b>Button.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Button component<br/>Variants & sizes"]

                CONTACT_LINKS["<b>ContactLinks.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Social media links<br/>â€¢ LinkedIn<br/>â€¢ GitHub<br/>â€¢ Website<br/>â€¢ Twitter"]

                GLASS_PANEL["<b>GlassPanel.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Glassmorphism panel<br/>Backdrop blur effect"]

                ICON_BADGE["<b>IconBadge.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Icon with badge<br/>Notification indicator"]

                NAVBAR["<b>Navbar.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Top navigation bar<br/>â€¢ Logo<br/>â€¢ Navigation links<br/>â€¢ Theme toggle"]

                THEME_TOGGLE["<b>ThemeToggle.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Dark/light mode toggle<br/>Sun/moon icon"]
            end

            subgraph COMPONENT_TESTS["data/__tests__/"]
                DATA_EXPLORER_TEST["<b>DataExplorer.test.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>DataExplorer tests<br/>â€¢ Search functionality<br/>â€¢ Tag filtering<br/>â€¢ Component rendering"]

                SEARCH_BAR_TEST["<b>SearchBar.test.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>SearchBar tests<br/>â€¢ Input handling<br/>â€¢ Debouncing"]

                TAG_FILTER_TEST["<b>TagFilter.test.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>TagFilter tests<br/>â€¢ Tag selection<br/>â€¢ Active states"]
            end
        end

        subgraph CONTEXTS["contexts/ - React Context"]
            THEME_CONTEXT["<b>ThemeContext.tsx</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Theme state management<br/>â€¢ Dark/light mode<br/>â€¢ localStorage persistence<br/>â€¢ System preference detection"]
        end

        subgraph LIB_DIR["lib/ - Utilities & Libraries"]
            direction TB

            LIB_README["<b>README.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Library documentation"]

            UTILS["<b>utils.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>General utilities<br/>â€¢ cn() - classnames helper<br/>â€¢ Type utilities"]

            TAGS_LIB["<b>tags.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Tag processing & filtering<br/>â€¢ Tag extraction<br/>â€¢ Tag counting<br/>â€¢ Priority calculation<br/>â€¢ Sorting algorithms"]

            RESUME_METRICS["<b>resume-metrics.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Resume metrics calculation<br/>â€¢ Total bullets<br/>â€¢ Companies count<br/>â€¢ Tag distribution<br/>â€¢ Date ranges"]

            VCARD_GEN["<b>vcard.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/><b>vCard 3.0 GENERATION</b><br/>â”â”â”â”â”â”â”â”â”â”â”<br/>RFC 2426 compliant<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Features:</b><br/>â€¢ N (name) field<br/>â€¢ FN (formatted name)<br/>â€¢ EMAIL, TEL fields<br/>â€¢ ADR (address)<br/>â€¢ URL (social links)<br/>â€¢ Special char escaping<br/>â€¢ CRLF line endings<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Social Media:</b><br/>â€¢ LinkedIn â†’ URL<br/>â€¢ GitHub â†’ URL<br/>â€¢ Website â†’ URL<br/>â€¢ Twitter â†’ URL"]

            RATE_LIMIT["<b>rate-limit.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/><b>RATE LIMITING</b><br/>â”â”â”â”â”â”â”â”â”â”â”<br/>In-memory implementation<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>RateLimitConfig:</b><br/>â€¢ limit: number<br/>â€¢ window: milliseconds<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Functions:</b><br/>â€¢ checkRateLimit()<br/>â€¢ getClientIP()<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>IP Extraction Priority:</b><br/>1. cf-connecting-ip (Cloudflare)<br/>2. x-real-ip (Vercel)<br/>3. x-forwarded-for (generic)<br/>4. fallback: 'unknown'<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Storage:</b><br/>Map<identifier, RequestInfo>"]

            subgraph LIB_TESTS["__tests__/"]
                LIB_TEST_README["<b>README.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Test documentation"]

                TAGS_TEST["<b>tags.test.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Tag utility tests<br/>â€¢ Tag extraction<br/>â€¢ Filtering logic<br/>â€¢ Sorting"]

                VCARD_TEST["<b>vcard.test.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>548 lines | 34 tests<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>vCard GENERATION TESTS</b><br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Coverage:</b><br/>â€¢ Required fields<br/>â€¢ Optional fields<br/>â€¢ Special char escaping<br/>â€¢ Social media URLs<br/>â€¢ Address handling<br/>â€¢ Unicode support<br/>â€¢ CRLF line endings<br/>â€¢ RFC 2426 compliance<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Edge Cases:</b><br/>â€¢ Empty fields<br/>â€¢ Partial addresses<br/>â€¢ International chars<br/>â€¢ Emoji support"]

                RATE_LIMIT_TEST["<b>rate-limit.test.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>400 lines | 30 tests<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>RATE LIMITING TESTS</b><br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Coverage:</b><br/>â€¢ Request tracking<br/>â€¢ Limit enforcement<br/>â€¢ Window expiration<br/>â€¢ IP extraction<br/>â€¢ Concurrent requests<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Edge Cases:</b><br/>â€¢ Zero limit<br/>â€¢ Empty identifiers<br/>â€¢ Very long identifiers<br/>â€¢ Special characters<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Test Isolation:</b><br/>Date.now() + Math.random()<br/>Unique identifiers per test"]

                subgraph LIB_FIXTURES["fixtures/"]
                    RESUME_FIXTURE["<b>resume-data.fixture.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Test fixture data<br/>Mock resume structure<br/>For component tests"]
                end
            end
        end
    end

    %% ========================================================================
    %% SCRIPTS & TOOLING
    %% ========================================================================

    subgraph SCRIPTS_DIR["ğŸ”§ SCRIPTS & TOOLING"]
        direction TB

        SCRIPTS_CLAUDE["<b>scripts/CLAUDE.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Scripts-specific context<br/>Gist integration patterns<br/>Type generation workflows"]

        FETCH_GIST["<b>scripts/fetch-gist-data.js</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/><b>GIST â†’ LOCAL</b><br/>â”â”â”â”â”â”â”â”â”â”â”<br/>Fetch resume data from gist<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Usage:</b><br/>npm run data:pull<br/>npm run data:pull -- --force<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Modes:</b><br/>â€¢ Interactive: Prompts on conflict<br/>â€¢ Force: Overwrites (prebuild)<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Process:</b><br/>1. Fetch from RESUME_DATA_GIST_URL<br/>2. Compare with local file<br/>3. Prompt or overwrite<br/>4. Write to data/resume-data.json<br/>â”â”â”â”â”â”â”â”â”â”â”<br/>âš ï¸ ALWAYS run before editing data"]

        PUSH_GIST["<b>scripts/gist-push.js</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/><b>LOCAL â†’ GIST</b><br/>â”â”â”â”â”â”â”â”â”â”â”<br/>Push local data to gist<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Usage:</b><br/>npm run data:push<br/>npm run data:push -- --force<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Process:</b><br/>1. Read local file<br/>2. Validate JSON<br/>3. Fetch current gist<br/>4. Compare & prompt<br/>5. Push with gh CLI<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Requires:</b><br/>gh CLI authenticated"]

        VIEW_GIST["<b>scripts/gist-view.js</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>View gist in terminal<br/>Pretty-print JSON<br/>Debugging helper"]

        GEN_TS_SCRIPT["<b>scripts/gen-ts-from-schemas.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Already documented in TYPE_SYSTEM"]

        VALIDATE_COMPENDIUM["<b>scripts/validate-compendium.mjs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Schema validation<br/>â€¢ Validates resume data<br/>â€¢ Against JSON Schema<br/>â€¢ Runtime checks"]

        TEST_SELECTION_API["<b>scripts/test-bullet-selection-api.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>API integration test<br/>Tests /api/resume/select<br/>All role profiles"]

        TRANSFORM_DATA["<b>scripts/transform-resume-data.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Data migration script<br/>â€¢ Schema migrations<br/>â€¢ Field transformations<br/>â€¢ Bulk updates"]

        TRANSFORM_TEMPLATE["<b>scripts/transform-template.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Template transformation<br/>Updates template structure"]

        CLEAN_TEMPLATE["<b>scripts/clean-template.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Template cleanup<br/>Removes old fields"]
    end

    %% ========================================================================
    %% PUBLIC ASSETS
    %% ========================================================================

    subgraph PUBLIC_DIR["ğŸŒ PUBLIC ASSETS"]
        THEME_INIT["<b>public/theme-init.js</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Theme initialization<br/>â€¢ Runs before hydration<br/>â€¢ Prevents flash of wrong theme<br/>â€¢ Reads localStorage<br/>â€¢ Sets data-theme attribute"]
    end

    %% ========================================================================
    %% DATA STORAGE
    %% ========================================================================

    subgraph DATA_STORAGE["ğŸ’¾ DATA STORAGE"]
        direction TB

        LOCAL_RESUME_DATA["<b>data/resume-data.json</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/><b>LOCAL RESUME DATA</b><br/>â”â”â”â”â”â”â”â”â”â”â”<br/>âš ï¸ GITIGNORED<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Source:</b> GitHub Gist<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Lifecycle:</b><br/>1. Fetched via fetch-gist-data.js<br/>2. Used at build time<br/>3. Bundled into Next.js<br/>4. Served as static chunks<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Never commit to git!</b><br/>Always pull before editing"]

        TEMPLATE_DATA["<b>data/resume-data-template.json</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Already documented in TYPE_SYSTEM"]
    end

    %% ========================================================================
    %% CONFIGURATION FILES
    %% ========================================================================

    subgraph CONFIG["âš™ï¸ CONFIGURATION FILES"]
        direction TB

        PACKAGE_JSON["<b>package.json</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/><b>NPM PACKAGE CONFIG</b><br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Scripts:</b><br/>â€¢ dev, build, start<br/>â€¢ test, typecheck<br/>â€¢ data:pull, data:push<br/>â€¢ types:gen, schemas:emit<br/>â€¢ validate:*, check:drift<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Dependencies:</b><br/>â€¢ next, react, react-dom<br/>â€¢ tailwindcss<br/>â€¢ vitest, @testing-library<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Hooks:</b><br/>prebuild: fetch-gist-data --force"]

        PACKAGE_LOCK["<b>package-lock.json</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>NPM lockfile<br/>Auto-generated<br/>âš ï¸ Never edit manually"]

        CARGO_LOCK["<b>Cargo.lock</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Cargo lockfile<br/>Auto-generated<br/>âš ï¸ Never edit manually"]

        VITEST_CONFIG["<b>vitest.config.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Vitest test runner config<br/>â€¢ Path aliases<br/>â€¢ Test environment<br/>â€¢ Coverage settings"]

        VITEST_SETUP["<b>vitest.setup.ts</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Vitest global setup<br/>â€¢ Test utilities<br/>â€¢ Global mocks"]

        POSTCSS_CONFIG["<b>postcss.config.mjs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>PostCSS configuration<br/>â€¢ Tailwind CSS<br/>â€¢ Autoprefixer"]

        ESLINT_CONFIG["<b>eslint.config.mjs</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>ESLint configuration<br/>â€¢ TypeScript rules<br/>â€¢ React rules<br/>â€¢ Next.js rules"]
    end

    %% ========================================================================
    %% CLAUDE CODE & AI CONTEXT
    %% ========================================================================

    subgraph CLAUDE_CONTEXT["ğŸ¤– CLAUDE CODE & AI CONTEXT"]
        direction TB

        CLAUDE_ROOT["<b>.claude/CLAUDE.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/><b>ROOT AI CONTEXT</b><br/>â”â”â”â”â”â”â”â”â”â”â”<br/>Main entry point for AI<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Imports:</b><br/>â€¢ docs/*.md (shared context)<br/>â€¢ Component-specific CLAUDE.md<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>Structure:</b><br/>Modular, lazy-loaded<br/>Context on demand"]

        CLAUDE_SETTINGS["<b>.claude/settings.local.json</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Claude Code settings<br/>â€¢ Tool approvals<br/>â€¢ Auto-accept patterns<br/>â€¢ Model selection"]
    end

    %% ========================================================================
    %% DOCUMENTATION SYSTEM
    %% ========================================================================

    subgraph DOCUMENTATION["ğŸ“š DOCUMENTATION SYSTEM"]
        direction TB

        README_ROOT["<b>README.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Project overview<br/>â€¢ Quick start<br/>â€¢ Tech stack<br/>â€¢ Commands<br/>â€¢ Getting started"]

        CODE_REVIEW_GUIDE_DOC["<b>CODE_REVIEW_GUIDE.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Code review checklist<br/>â€¢ File-by-file review<br/>â€¢ Review priorities<br/>â€¢ Test validation<br/>â€¢ Commit message"]

        AGENTS_DOC["<b>AGENTS.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>AI agent patterns<br/>â€¢ claude-md-generator<br/>â€¢ Agent usage"]

        NAMING_CONVENTIONS["<b>NAMING_CONVENTIONS.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Code style guide<br/>â€¢ Naming patterns<br/>â€¢ File organization"]

        SECURITY_DOC["<b>SECURITY.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Security policy<br/>â€¢ Vulnerability reporting<br/>â€¢ Security practices"]

        subgraph DOCS_SHARED["docs/ - Shared Context"]
            STATUS_DOC["<b>STATUS.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Current phase & progress<br/>â€¢ Phase 1: âœ… Complete<br/>â€¢ Phase 5: ğŸš§ In progress<br/>â€¢ Test metrics: 361 tests<br/>â€¢ Blockers & considerations"]

            TODOS_DOC["<b>TODOS.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Active tasks<br/>â€¢ Current priorities<br/>â€¢ Task tracking"]

            ARCHITECTURE_DOC["<b>ARCHITECTURE.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>System design overview<br/>â€¢ High-level architecture<br/>â€¢ Component interactions<br/>â€¢ Data flows"]

            ARCHITECTURE_DEEP["<b>ARCHITECTURE_DEEP_DIVE.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>1206 lines<br/>â”â”â”â”â”â”â”â”â”â”â”<br/><b>COMPLETE ARCHITECTURE MAP</b><br/>â”â”â”â”â”â”â”â”â”â”â”<br/>This document's source!<br/>â€¢ All 118 files documented<br/>â€¢ All connections mapped<br/>â€¢ Data flow diagrams<br/>â€¢ File inventory<br/>â€¢ Dead code audit<br/>â€¢ Usage guide"]

            COMPLETE_MAP["<b>ARCHITECTURE_COMPLETE_MAP.mmd</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/><b>THIS DIAGRAM!</b><br/>â”â”â”â”â”â”â”â”â”â”â”<br/>Comprehensive mermaid<br/>â€¢ All files mapped<br/>â€¢ All connections<br/>â€¢ Visual system overview"]

            WORKFLOWS_DOC["<b>WORKFLOWS.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Development patterns<br/>â€¢ Type sync workflow<br/>â€¢ Data sync workflow<br/>â€¢ Testing patterns<br/>â€¢ Git workflow"]

            DATA_SCHEMA_DOC["<b>DATA_SCHEMA.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Type system reference<br/>â€¢ Type definitions<br/>â€¢ Field descriptions<br/>â€¢ Validation rules<br/>â€¢ Schema examples"]

            COMMANDS_DOC["<b>COMMANDS.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Command reference<br/>â€¢ npm scripts<br/>â€¢ cargo commands<br/>â€¢ git commands<br/>â€¢ Common tasks"]

            DEPLOYMENT_DOC["<b>DEPLOYMENT.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Environment setup<br/>â€¢ .env.local variables<br/>â€¢ Vercel configuration<br/>â€¢ Gist setup<br/>â€¢ Turnstile setup"]

            PHASE_5_PLAN["<b>PHASE_5_PLAN.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Roadmap for Phase 5<br/>â€¢ PDF generation<br/>â€¢ DOCX generation<br/>â€¢ WASM integration<br/>â€¢ UI implementation"]

            REFACTOR_SUMMARY["<b>REFACTOR_SUMMARY.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Historical refactor notes<br/>â€¢ Past changes<br/>â€¢ Lessons learned"]
        end
    end

    %% ========================================================================
    %% CI/CD & DEPLOYMENT
    %% ========================================================================

    subgraph CICD["ğŸš€ CI/CD & DEPLOYMENT"]
        direction TB

        GH_WORKFLOWS_CLAUDE["<b>.github/workflows/CLAUDE.md</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>CI/CD context for AI<br/>â€¢ Workflow patterns<br/>â€¢ Deployment triggers"]

        VERCEL_CONFIG["<b>.vercel/project.json</b><br/>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br/>Vercel project config<br/>â€¢ Project ID<br/>â€¢ Organization ID"]
    end

    %% ========================================================================
    %% CONNECTIONS - TYPE FLOW
    %% ========================================================================

    %% Rust Types â†’ Schema â†’ TypeScript
    SHARED_TYPES -->|Uses schemars| SCHEMA_EMITTER
    SCHEMA_EMITTER -->|Generates| JSON_SCHEMA_FILE
    JSON_SCHEMA_FILE -->|Input to| TS_GENERATOR
    TS_GENERATOR -->|Generates| GENERATED_TS
    GENERATED_TS -->|Re-exported by| CANONICAL_TYPES
    TEMPLATE_JSON -.->|Example format| SHARED_TYPES

    %% Type usage in Rust
    SHARED_TYPES -.->|Defines types for| SCORING_RS
    SHARED_TYPES -.->|Defines types for| SELECTOR_RS
    SHARED_TYPES -.->|Defines types for| PDF_LIB
    SHARED_TYPES -.->|Defines types for| WASM_LIB
    CORE_TYPES -->|Re-exports| SHARED_TYPES

    %% Type usage in TypeScript
    CANONICAL_TYPES -->|Imported by| SELECT_API
    CANONICAL_TYPES -->|Imported by| CONTACT_CARD_API
    CANONICAL_TYPES -->|Imported by| DATA_EXPLORER
    CANONICAL_TYPES -->|Imported by| RESUME_VIEW

    %% ========================================================================
    %% CONNECTIONS - RUST CORE
    %% ========================================================================

    %% Cargo workspace
    WORKSPACE_TOML -.->|Defines workspace| CORE_CARGO
    WORKSPACE_TOML -.->|Defines workspace| PDF_CARGO
    WORKSPACE_TOML -.->|Defines workspace| DOCX_CARGO
    WORKSPACE_TOML -.->|Defines workspace| WASM_CARGO
    WORKSPACE_TOML -.->|Defines workspace| ST_CARGO

    %% Core module dependencies
    CORE_LIB -->|Re-exports| SCORING_RS
    CORE_LIB -->|Re-exports| SELECTOR_RS
    SCORING_RS -->|Used by| SELECTOR_RS
    SELECTOR_RS -->|Used by| PDF_LIB

    %% PDF generation
    PDF_LIB -->|Uses| PDF_GENERATOR
    PDF_LIB -->|Uses| PDF_LAYOUT
    PDF_GENERATOR -->|Uses| PDF_HEADER
    PDF_GENERATOR -->|Uses| PDF_BODY
    PDF_GENERATOR -->|Uses| PDF_FOOTER
    PDF_LAYOUT -.->|Layout engine for| PDF_GENERATOR

    %% WASM exports
    WASM_LIB -->|Calls| PDF_LIB
    WASM_LIB -->|Calls| DOCX_LIB
    WASM_LIB -->|Generates| WASM_JS
    WASM_LIB -->|Generates| WASM_DTS
    WASM_LIB -->|Generates| WASM_BG_DTS

    %% ========================================================================
    %% CONNECTIONS - NEXT.JS APP
    %% ========================================================================

    %% App structure
    APP_LAYOUT -->|Wraps| APP_PAGE
    APP_LAYOUT -->|Wraps| RESUME_VIEW
    APP_LAYOUT -->|Provides| THEME_CONTEXT
    APP_PAGE -->|Links to| RESUME_VIEW
    RESUME_PAGE -->|Redirects to| RESUME_VIEW

    %% Resume viewer components
    RESUME_VIEW -->|Renders| DATA_EXPLORER
    DATA_EXPLORER -->|Uses| SEARCH_BAR
    DATA_EXPLORER -->|Uses| TAG_FILTER
    DATA_EXPLORER -->|Uses| COMPANY_SECTION
    COMPANY_SECTION -->|Contains| BULLET_CARD
    BULLET_CARD -->|Uses| BADGE
    DATA_EXPLORER -->|Uses| TAGS_LIB
    DATA_EXPLORER -->|Uses| RESUME_METRICS

    %% API routes
    CONTACT_CARD_API -->|Uses| VCARD_GEN
    CONTACT_CARD_API -->|Uses| RATE_LIMIT
    CONTACT_CARD_API -->|Verifies with| CLOUDFLARE
    SELECT_API -->|Uses| RATE_LIMIT
    SELECT_API -->|Verifies with| CLOUDFLARE
    SELECT_API -->|Mirrors algorithm from| SCORING_RS
    SELECT_API -->|Mirrors algorithm from| SELECTOR_RS

    %% UI components
    APP_LAYOUT -->|Uses| NAVBAR
    NAVBAR -->|Uses| THEME_TOGGLE
    THEME_TOGGLE -->|Updates| THEME_CONTEXT

    %% ========================================================================
    %% CONNECTIONS - DATA FLOW
    %% ========================================================================

    %% Gist â†’ Local â†’ Build
    GIST -->|Fetched by| FETCH_GIST
    FETCH_GIST -->|Writes to| LOCAL_RESUME_DATA
    LOCAL_RESUME_DATA -->|Pushed by| PUSH_GIST
    PUSH_GIST -->|Updates| GIST
    LOCAL_RESUME_DATA -->|Build-time import| SELECT_API
    LOCAL_RESUME_DATA -->|Build-time import| DATA_EXPLORER

    %% Build pipeline
    VERCEL -->|Prebuild hook| FETCH_GIST
    VERCEL -->|Builds| NEXTJS_APP
    VERCEL -->|Serves| USER

    %% Scripts usage
    TS_GENERATOR -.->|npm run types:gen| PACKAGE_JSON
    FETCH_GIST -.->|npm run data:pull| PACKAGE_JSON
    PUSH_GIST -.->|npm run data:push| PACKAGE_JSON

    %% ========================================================================
    %% CONNECTIONS - TESTING
    %% ========================================================================

    %% Rust tests
    SCORING_RS -.->|Contains 22 tests| INTEGRATION_TEST
    SELECTOR_RS -.->|Contains 7 tests| INTEGRATION_TEST
    INTEGRATION_TEST -->|Uses| LOCAL_RESUME_DATA
    PDF_PERMUTATION_TEST -->|Uses| LOCAL_RESUME_DATA
    PDF_PERMUTATION_TEST -->|Tests| PDF_LIB
    REAL_DATA_TEST -->|Validates| SHARED_TYPES
    ROUNDTRIP_TEST -->|Tests| SHARED_TYPES
    SCHEMA_VAL_TEST -->|Validates| JSON_SCHEMA_FILE

    %% TypeScript tests
    SELECT_ROUTE_TEST -->|Tests| SELECT_API
    SELECT_ROUTE_TEST -.->|Ensures parity with| SCORING_RS
    VCARD_TEST -->|Tests| VCARD_GEN
    RATE_LIMIT_TEST -->|Tests| RATE_LIMIT
    TAGS_TEST -->|Tests| TAGS_LIB
    DATA_EXPLORER_TEST -->|Tests| DATA_EXPLORER
    SEARCH_BAR_TEST -->|Tests| SEARCH_BAR
    TAG_FILTER_TEST -->|Tests| TAG_FILTER

    %% Test fixtures
    RESUME_FIXTURE -->|Used by| DATA_EXPLORER_TEST

    %% ========================================================================
    %% CONNECTIONS - DOCUMENTATION
    %% ========================================================================

    %% Documentation hierarchy
    CLAUDE_ROOT -->|Imports| STATUS_DOC
    CLAUDE_ROOT -->|Imports| TODOS_DOC
    CLAUDE_ROOT -->|Imports| ARCHITECTURE_DOC
    CLAUDE_ROOT -->|Imports| WORKFLOWS_DOC
    CLAUDE_ROOT -->|Imports| DATA_SCHEMA_DOC
    CLAUDE_ROOT -->|Imports| COMMANDS_DOC
    CLAUDE_ROOT -->|Imports| DEPLOYMENT_DOC
    CLAUDE_ROOT -.->|Component context| APP_CLAUDE
    CLAUDE_ROOT -.->|Component context| DG_CLAUDE
    CLAUDE_ROOT -.->|Component context| SCRIPTS_CLAUDE
    CLAUDE_ROOT -.->|Component context| GH_WORKFLOWS_CLAUDE

    ARCHITECTURE_DEEP -->|Documents| COMPLETE_MAP
    COMPLETE_MAP -.->|This diagram!| COMPLETE_MAP

    %% ========================================================================
    %% CONNECTIONS - EXTERNAL SYSTEMS
    %% ========================================================================

    %% GitHub
    GITHUB -->|Webhook trigger| VERCEL
    GITHUB -->|Hosts| GIST

    %% User interactions
    USER -->|Visits| VERCEL
    USER -->|Downloads vCard| CONTACT_CARD_API
    USER -->|Future: Generate PDF| PREPARE_API
    PREPARE_API -.->|Future: Uses| WASM_LIB

    %% Dependencies
    NPM_REG -->|Provides| PACKAGE_JSON
    CARGO_REG -->|Provides| WORKSPACE_TOML

    %% ========================================================================
    %% STYLING & VISUAL ORGANIZATION
    %% ========================================================================

    classDef external fill:#e1f5ff,stroke:#0066cc,stroke-width:4px
    classDef types fill:#ffe1f5,stroke:#cc0066,stroke-width:3px
    classDef rust fill:#ffebe1,stroke:#cc3300,stroke-width:2px
    classDef nextjs fill:#e1ffe5,stroke:#00cc33,stroke-width:2px
    classDef scripts fill:#fff5e1,stroke:#cc9900,stroke-width:2px
    classDef data fill:#f0e1ff,stroke:#6600cc,stroke-width:2px
    classDef tests fill:#ffe1e1,stroke:#cc0000,stroke-width:2px
    classDef docs fill:#e1f5e1,stroke:#339900,stroke-width:2px
    classDef config fill:#f5f5f5,stroke:#666666,stroke-width:1px
    classDef generated fill:#ffffcc,stroke:#cc9900,stroke-width:2px,stroke-dasharray: 5 5

    %% External systems
    class GITHUB,GIST,VERCEL,CLOUDFLARE,USER,NPM_REG,CARGO_REG external

    %% Type system
    class SHARED_TYPES,SCHEMA_EMITTER,JSON_SCHEMA_FILE,TS_GENERATOR,GENERATED_TS,CANONICAL_TYPES,TEMPLATE_JSON,TEMPLATE_GUIDE types

    %% Rust core
    class WORKSPACE_TOML,CORE_LIB,CORE_TYPES,SCORING_RS,SELECTOR_RS,CORE_CARGO,PDF_LIB,PDF_GENERATOR,PDF_LAYOUT,PDF_HEADER,PDF_BODY,PDF_FOOTER,PDF_CARGO,DOCX_LIB,DOCX_CARGO,WASM_LIB,WASM_CARGO rust

    %% Next.js
    class APP_LAYOUT,APP_PAGE,RESUME_PAGE,RESUME_VIEW,CONTACT_CARD_API,SELECT_API,PREPARE_API,DATA_EXPLORER,BULLET_CARD,COMPANY_SECTION,SEARCH_BAR,TAG_FILTER,BADGE,BUTTON,CONTACT_LINKS,GLASS_PANEL,ICON_BADGE,NAVBAR,THEME_TOGGLE,THEME_CONTEXT,UTILS,TAGS_LIB,RESUME_METRICS,VCARD_GEN,RATE_LIMIT nextjs

    %% Scripts
    class FETCH_GIST,PUSH_GIST,VIEW_GIST,VALIDATE_COMPENDIUM,TEST_SELECTION_API,TRANSFORM_DATA,TRANSFORM_TEMPLATE,CLEAN_TEMPLATE,THEME_INIT scripts

    %% Data
    class LOCAL_RESUME_DATA,TEMPLATE_DATA data

    %% Tests
    class REAL_DATA_TEST,ROUNDTRIP_TEST,SCHEMA_VAL_TEST,INTEGRATION_TEST,PDF_PERMUTATION_TEST,CORE_ROUNDTRIP,SELECT_ROUTE_TEST,VCARD_TEST,RATE_LIMIT_TEST,TAGS_TEST,DATA_EXPLORER_TEST,SEARCH_BAR_TEST,TAG_FILTER_TEST,RESUME_FIXTURE tests

    %% Documentation
    class README_ROOT,CODE_REVIEW_GUIDE_DOC,AGENTS_DOC,NAMING_CONVENTIONS,SECURITY_DOC,STATUS_DOC,TODOS_DOC,ARCHITECTURE_DOC,ARCHITECTURE_DEEP,COMPLETE_MAP,WORKFLOWS_DOC,DATA_SCHEMA_DOC,COMMANDS_DOC,DEPLOYMENT_DOC,PHASE_5_PLAN,REFACTOR_SUMMARY,DG_README,DG_CLAUDE,DG_TEST_REPORT,APP_CLAUDE,SCRIPTS_CLAUDE,GH_WORKFLOWS_CLAUDE,CLAUDE_ROOT,CLAUDE_SETTINGS,LIB_README,LIB_TEST_README docs

    %% Config
    class NEXT_CONFIG,TS_CONFIG,MIDDLEWARE,NEXT_ENV_DTS,PACKAGE_JSON,PACKAGE_LOCK,CARGO_LOCK,VITEST_CONFIG,VITEST_SETUP,POSTCSS_CONFIG,ESLINT_CONFIG,VERCEL_CONFIG,ST_CARGO config

    %% Generated files (special styling)
    class JSON_SCHEMA_FILE,GENERATED_TS,WASM_JS,WASM_DTS,WASM_BG_DTS,WASM_PKG_JSON,PACKAGE_LOCK,CARGO_LOCK,NEXT_ENV_DTS generated
